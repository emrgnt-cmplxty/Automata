<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>EmbeddingNormType &mdash; Automata  documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/dark_mode_css/general.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/dark_mode_css/dark.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/dark_mode_js/default_dark.js"></script>
        <script src="../../_static/dark_mode_js/theme_switcher.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="EmbeddingSimilarityCalculator" href="embedding_similarity_calculator.html" />
    <link rel="prev" title="EmbeddingHandler" href="embedding_handler.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Automata
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../setup_guide.html">Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../embedding_guide.html">Creating Your Own Embeddings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../agent_guide.html">Agent Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../config/index.html">Config Classes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Core Classes</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../handler_dict.html">HandlerDict</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logging_config.html">LoggingConfig</a></li>
<li class="toctree-l2"><a class="reference internal" href="../root_dict.html">RootDict</a></li>
<li class="toctree-l2"><a class="reference internal" href="../agent/index.html">agent</a></li>
<li class="toctree-l2"><a class="reference internal" href="../base/index.html">base</a></li>
<li class="toctree-l2"><a class="reference internal" href="../code_handling/index.html">code_handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../context_providers/index.html">context_providers</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">embedding</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="embedding.html">Embedding</a></li>
<li class="toctree-l3"><a class="reference internal" href="embedding_builder.html">EmbeddingBuilder</a></li>
<li class="toctree-l3"><a class="reference internal" href="embedding_handler.html">EmbeddingHandler</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">EmbeddingNormType</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#related-symbols">Related Symbols</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example">Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="#limitations">Limitations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#follow-up-questions">Follow-up Questions:</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="embedding_similarity_calculator.html">EmbeddingSimilarityCalculator</a></li>
<li class="toctree-l3"><a class="reference internal" href="embedding_vector_provider.html">EmbeddingVectorProvider</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../experimental/index.html">experimental</a></li>
<li class="toctree-l2"><a class="reference internal" href="../github_management/index.html">github_management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../llm/index.html">llm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../memory_store/index.html">memory_store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../navigation/index.html">navigation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../retrievers/index.html">retrievers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../singletons/index.html">singletons</a></li>
<li class="toctree-l2"><a class="reference internal" href="../symbol/index.html">symbol</a></li>
<li class="toctree-l2"><a class="reference internal" href="../symbol_embedding/index.html">symbol_embedding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tasks/index.html">tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools/index.html">tools</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../tests/index.html">Test Classes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Automata</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Core Classes</a></li>
          <li class="breadcrumb-item"><a href="index.html">embedding</a></li>
      <li class="breadcrumb-item active">EmbeddingNormType</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/core/embedding/embedding_norm_type.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="embeddingnormtype">
<h1>EmbeddingNormType<a class="headerlink" href="#embeddingnormtype" title="Permalink to this headline"></a></h1>
<p><code class="docutils literal notranslate"><span class="pre">EmbeddingNormType</span></code> is an enumeration class that provides different
methods to normalize the embeddings vectors in the Automata’s core
functionalities. It is used in the process of comparing and ranking
symbol embeddings based on their similarity to a query.</p>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">EmbeddingNormType</span></code> supports <code class="docutils literal notranslate"><span class="pre">L1</span></code> and <code class="docutils literal notranslate"><span class="pre">L2</span></code> methods. When used in
an embedding similarity calculator instance, this setting determines how
the distance between the query embedding vector and symbol embeddings
are calculated.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">L1</span></code>: Calculates the L1 norm (Manhattan distance) between two
vectors.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">L2</span></code>: Calculates the L2 norm (Euclidean Distance) between two
vectors.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">EmbeddingNormType</span></code> is supplied as an argument to the
<code class="docutils literal notranslate"><span class="pre">EmbeddingSimilarityCalculator</span></code> class during initialization,
determining the norm method used for all similarity calculations within
that instance.</p>
</section>
<section id="related-symbols">
<h2>Related Symbols<a class="headerlink" href="#related-symbols" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">automata.core.symbol_embedding.base.SymbolCodeEmbedding</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">automata.core.embedding.base.EmbeddingSimilarityCalculator</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">automata.core.base.database.vector.VectorDatabaseProvider</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">automata.tests.unit.test_symbol_similarity.test_get_nearest_symbols_for_query</span></code></p></li>
</ul>
</section>
<section id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline"></a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">automata.core.embedding.base</span> <span class="kn">import</span> <span class="n">EmbeddingNormType</span><span class="p">,</span> <span class="n">EmbeddingSimilarityCalculator</span>
<span class="kn">from</span> <span class="nn">automata.core.symbol_embedding.base</span> <span class="kn">import</span> <span class="n">SymbolCodeEmbedding</span>
<span class="kn">from</span> <span class="nn">automata.core.base.database.vector</span> <span class="kn">import</span> <span class="n">JSONSymbolEmbeddingVectorDatabase</span>

<span class="c1"># Assuming you have a set of symbol embeddings stored in a JSON database.</span>
<span class="n">database_path</span> <span class="o">=</span> <span class="s2">&quot;path_to_your_database.json&quot;</span>
<span class="n">embedding_db</span> <span class="o">=</span> <span class="n">JSONSymbolEmbeddingVectorDatabase</span><span class="p">(</span><span class="n">database_path</span><span class="p">)</span>

<span class="c1"># Assume we have a mock embedding provider</span>
<span class="n">mock_provider</span> <span class="o">=</span> <span class="n">MockEmbeddingProvider</span><span class="p">()</span>

<span class="c1"># Instantiate an EmbeddingSimilarityCalculator with L1 norm.</span>
<span class="n">similarity_calculator</span> <span class="o">=</span> <span class="n">EmbeddingSimilarityCalculator</span><span class="p">(</span>
    <span class="n">embedding_provider</span><span class="o">=</span><span class="n">mock_provider</span><span class="p">,</span>
    <span class="n">norm_type</span><span class="o">=</span><span class="n">EmbeddingNormType</span><span class="o">.</span><span class="n">L1</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Get ordered embeddings from database and compute similarity of a query_text</span>
<span class="n">ordered_embeddings</span> <span class="o">=</span> <span class="n">embedding_db</span><span class="o">.</span><span class="n">get_ordered_embeddings</span><span class="p">()</span>
<span class="n">query_text</span> <span class="o">=</span> <span class="s1">&#39;def initialize(x, y):&#39;</span>
<span class="n">similarity_dict</span> <span class="o">=</span> <span class="n">similarity_calculator</span><span class="o">.</span><span class="n">calculate_query_similarity_dict</span><span class="p">(</span><span class="n">ordered_embeddings</span><span class="p">,</span> <span class="n">query_text</span><span class="p">)</span>

<span class="c1"># The keys of the returned dictionary are the symbols and the values are the similarity scores.</span>
<span class="n">most_similar_symbol</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">similarity_dict</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">similarity_dict</span><span class="o">.</span><span class="n">get</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Symbol most similar to the query is </span><span class="si">{</span><span class="n">most_similar_symbol</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="limitations">
<h2>Limitations<a class="headerlink" href="#limitations" title="Permalink to this headline"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">EmbeddingNormType</span></code> only supports L1 and L2 norm methods. While
these methods cover typical use cases in calculating document
similarity, there are other distance measurement norms which could be
useful in different contexts, such as cosine similarity or Hamming
distance.</p>
<p>Other limitations would be that the user must ensure to match the norm
type to the nature of the embeddings used - as certain norm types may
not be suitable or produce the desired results given the type or
characteristics of the embedding vectors.</p>
</section>
<section id="follow-up-questions">
<h2>Follow-up Questions:<a class="headerlink" href="#follow-up-questions" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>How could other norm types be added to the <code class="docutils literal notranslate"><span class="pre">EmbeddingNormType</span></code>?</p></li>
<li><p>Could the norm type be dynamically set or changed for running
instances of <code class="docutils literal notranslate"><span class="pre">EmbeddingSimilarityCalculator</span></code>?</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="embedding_handler.html" class="btn btn-neutral float-left" title="EmbeddingHandler" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="embedding_similarity_calculator.html" class="btn btn-neutral float-right" title="EmbeddingSimilarityCalculator" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, emrgnt-cmplxty.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>